# CD-105: Build Web UI for Invitation Management

**Epic**: Community Directory
**Sprint**: 1
**Story Points**: 3
**Priority**: P2 (Medium)
**Status**: â¬œ Not Started
**Assignee**: Unassigned
**Dependencies**: CD-103

---

## ðŸ“‹ Description

Create web interface for Community Managers to view and manage invitations with React frontend and ElizaOS HTTP routes.

**Key Goals**:
- Build `/api/invitations` REST endpoints
- Create React invitation management page
- Display invitation cards with status
- Implement copy-to-clipboard functionality
- Add role-based access control

---

## ðŸŽ¯ Acceptance Criteria

- [ ] GET `/api/invitations` returns manager's invitations
- [ ] POST `/api/invitations` creates new invitation
- [ ] DELETE `/api/invitations/:id` cancels invitation
- [ ] Web UI displays all invitations with status colors
- [ ] Copy link button works with toast notification
- [ ] Cancel action requires confirmation dialog
- [ ] Only Community Managers can access page (403 otherwise)
- [ ] Loading states and error handling implemented

---

## ðŸ“ Technical Approach

### Data Access Strategy
- **ElizaOS Memory**: NOT used for this ticket
- **Drizzle/PostgreSQL**: All invitation queries via InvitationService

### Architecture Notes
**Route Pattern** (from ARCHITECTURE_RECOMMENDATION.md):
- ElizaOS HTTP routes for REST API
- Express-style request/response handling
- Role validation in route middleware
- InvitationService for business logic

**Frontend Integration**:
- React components in `src/frontend/pages/`
- Fetch API for HTTP requests
- shadcn/ui components for UI
- Toast notifications for user feedback

---

## âœ… Tasks

- [ ] Create `invitationRoutes.ts` with GET/POST/DELETE endpoints
- [ ] Implement role-based auth middleware
- [ ] Create `Invitations.tsx` page component
- [ ] Create `InvitationCard.tsx` component
- [ ] Implement invitation list with status badges
- [ ] Add create invitation button
- [ ] Add copy link button with clipboard API
- [ ] Add cancel button with confirmation dialog
- [ ] Add loading and error states
- [ ] Style with Tailwind CSS
- [ ] Register routes in plugin
- [ ] Test all API endpoints
- [ ] Test UI interactions

---

## ðŸ“ Files to Create/Modify

- `src/plugins/communityDirectory/routes/invitation.ts` - API routes
- `src/frontend/pages/Invitations.tsx` - Main page
- `src/frontend/components/InvitationCard.tsx` - Card component
- `src/plugins/communityDirectory/index.ts` - Register routes (modify)

---

## ðŸ§ª Testing Requirements

### Unit Tests
- [ ] Test GET endpoint returns filtered invitations
- [ ] Test POST endpoint creates invitation
- [ ] Test DELETE endpoint cancels invitation
- [ ] Test role validation rejects non-managers

### Integration Tests
- [ ] Test full API flow with database
- [ ] Test React component rendering
- [ ] Test copy-to-clipboard functionality

### Manual Testing
```bash
# Start dev server
elizaos dev

# Open browser
open http://localhost:5173/invitations

# Test:
# - View invitations list
# - Create new invitation
# - Copy invitation link
# - Cancel invitation
```

---

## ðŸ”— Related Documentation

- [EPIC_1_IMPLEMENTATION_PLAN.md](../../../docs/specs/EPIC_1_IMPLEMENTATION_PLAN.md) - Lines 539-729 (Story 1.5)
- [ARCHITECTURE_RECOMMENDATION.md](../../../docs/specs/ARCHITECTURE_RECOMMENDATION.md) - Lines 285-336 (Route Implementation Example)
- [ElizaOS HTTP Routes](https://elizaos.github.io/eliza/docs/core/routes/)

---

## ðŸ“ Implementation Notes

See EPIC_1_IMPLEMENTATION_PLAN.md lines 571-728 for complete route and React component implementation examples.

---

## âœ… Definition of Done

- [ ] All API endpoints working correctly
- [ ] Role-based access control enforced
- [ ] Web UI renders invitation list
- [ ] Copy and cancel actions functional
- [ ] Error handling with user-friendly messages
- [ ] Unit tests achieve >80% coverage
- [ ] Manual testing successful
- [ ] Code reviewed and approved
- [ ] No TypeScript compilation errors

---

**Created**: 2024-12-05
**Last Updated**: 2024-12-05
**Estimated Completion**: Day 6 of Sprint 1
