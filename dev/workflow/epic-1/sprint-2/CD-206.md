# CD-206: Implement Profile Edit Action

**Epic**: Community Directory
**Sprint**: 2
**Story Points**: 3
**Priority**: P1
**Status**: â¬œ Not Started
**Assignee**: Unassigned
**Dependencies**: CD-204

---

## ðŸ“‹ Description

Allow members to update their profiles after registration (name, role, organization, wallet).

**Key Goals**:
- Allow editing of mutable fields
- Lock immutable fields
- Validate input
- Confirmation before saving
- Error handling

---

## ðŸŽ¯ Acceptance Criteria

- [ ] Members can edit allowed fields (name, role, organization, country, wallet)
- [ ] Locked fields cannot be changed (telegram_id, telegram_username, github_username)
- [ ] Changes persisted to database
- [ ] Confirmation message shows updated profile
- [ ] Error handling for invalid inputs

---

## ðŸ“ Technical Approach

### Data Access Strategy
- **ElizaOS Memory**: Conversation history during editing/welcome
- **Drizzle/PostgreSQL**: Profile updates, member data retrieval

### Architecture Notes
**Action Pattern**: Conversational editing flow with field validation

---

## âœ… Tasks

- [ ] Create editProfileAction
- [ ] Allow editing: name, role, organization, country, wallet
- [ ] Lock editing: telegram_id, telegram_username, github_username
- [ ] Validate input before updates
- [ ] Add conversation flow for editing
- [ ] Add confirmation before saving
- [ ] Test profile edit flow

---

## ðŸ“ Files to Create/Modify

- `src/plugins/communityDirectory/actions/editProfile.ts`
- `src/plugins/communityDirectory/__tests__/editProfile.test.ts`
- `src/plugins/communityDirectory/index.ts` (modify)

---

## ðŸ§ª Testing Requirements

### Unit Tests
- [ ] Test all methods with valid inputs
- [ ] Test error handling with invalid inputs
- [ ] Test edge cases
- [ ] Achieve >80% code coverage

### Integration Tests
- [ ] Test with real/mocked dependencies
- [ ] Test database operations
- [ ] Test error scenarios

---

## ðŸ”— Related Documentation

- [EPIC_1_IMPLEMENTATION_PLAN.md](../../../docs/specs/EPIC_1_IMPLEMENTATION_PLAN.md) - Lines 875-1053
- [ARCHITECTURE_RECOMMENDATION.md](../../../docs/specs/ARCHITECTURE_RECOMMENDATION.md)

---

## ðŸ“ Implementation Notes

See EPIC_1_IMPLEMENTATION_PLAN.md for detailed implementation guidance for ticket CD-206.

---

## âœ… Definition of Done

- [ ] All functionality implemented correctly
- [ ] Unit tests achieve >80% coverage
- [ ] Integration tests passing
- [ ] Error handling comprehensive
- [ ] Code reviewed and approved
- [ ] No TypeScript compilation errors
- [ ] Documentation updated

---

**Created**: 2024-12-05
**Last Updated**: 2024-12-05
**Estimated Completion**: Day 19 of Sprint 2
